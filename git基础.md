## 直接记录快照，而非差异比较   
Git和其他控制系统（包括Subversion和近似工具）的主要差别在于Git对待数据的方法。概念上来区分，其他大部分系统以文件变更列表的方式存储信息。这类系统（CVS，Subversion、Perforce、Bazaar等等）将它们保存的信息看作是一组基本文件和每个文件随时间逐步累积的差异。  

Git不按照以上方法对待或保存数据。反之，Git更像是把数据看作是对小型文件系统的一组快照。每次你提交更新，或在Git中保存项目状态时，它主要对当时的全部文件之作一个快照并保存这个快照的索引。为了高效，如果文件没有修改，Git不再重新存储文件，而只是保留一个链接指向之前存储的文件。Git对待数据更像是一个`快照流`。   

>  
- git会把出现变更的文件直接拷贝，形成新的blob（二进制文件），而非与上一个版本的diff。   
- 所以一旦需要查看某版本直接load即可，而其他差异版本控制需要做merge，所以快。空间换时间。     
- 并非每个当前版本都需要备份，如果没有改变，那么文件快照直接链接到上一个版本。  
>  
git中的快照，就是一个备份，但这个备份不是像我们粘贴复制那么简单，git会处理、压缩，你可以使用这个快照恢复原来的状态。git会根据当前的内容生成一个校验和，是以此校验和为索引。每次提交，检测到校验和变化，就会生成一个新的快照，未更改的文件，则会链接到上一次的快照。这样就形成了一条链（这里先讨论没有其他分支的情况），git有一个HEAD指针，这个指针可以移动，这个指针移动到哪个快照，你就可以查看该快照也就是当时的找泰。  

## 近乎所有操作都是本地执行   

## Git保证完整性   
Git中所有数据在存储前都计算校验和，然后以校验和来引用。这意味着不可能在Git不知情时更改任何文件内容或目录内容。这个功能建构在Git底层，是构成Git哲学不可或缺的部分。若你在传送过程中丢失信息或损坏文件，GIt会发现。  
GIt计算校验和的机制叫做SHA-1散列。这是一个由40个十六进制字符（0-9,a-f）组成字符串，基于Git中文件的内容或目录结构计算出来。  


## 三种状态   
- git仓库目录： Git用来保存项目的元数据和对象数据库的地方。     
- 工作目录: 对项目的某个版本独立提取出来的内容，从git仓库的压缩数据库中提取出来的文件。   
- 暂存区域： 是一个文件，保存了下次将提交的文件列表信息，一般在Git仓库目录中。有时被称为“索引”。   

## 初次运行Git前的配置   
定制git环境，每台计算机只需要配置一次，程序升级时会保留配置信息。你可以在任何时候通过命令来修改他们。  

git 自带一个git config的工具来帮助设置控制git外观和行为的配置变量。这些变量存储在三个位置：   
- /etc/gitconfig文件。包含系统上每一个用户以及他们仓库的通用配置。如果使用带有--system选项的git config时，它会从此文件读写配置变量。      
- ~/.gitconfig或~/.config/git/config文件。只针对当前用户。选项为--global。   
- .git/config。针对该仓库。   

### 用户信息   
安装完git后第一件事情。每一次git提交都会使用这些信息，并且它会写入你的每一次提交中，不可更改。
```
$ git config --global user.name "john"
$ git config --global user.email john@example.com
```


## Git基础概述  
这一小节的内容，覆盖了git完成各种工作中将要使用的各种基础命令。   

### 获取git仓库  
两种方法：  
- 本地。git init。该命令创建一个名为.git子目录，包含git仓库中所有的必须文件。  
- 从远程克隆。 git clone。git克隆的是该git仓库服务器上的几乎所有数据，而不是仅仅复制完成你的工作所需要文件，与其他版本控制系统不同。git支持多种数据传输协议，包括http，ssh等。   

### 查看状态  
git status/git status -s(简单报告)   

git diff：查看暂存区域与当前文件的差异。   
git diff --cached: 对比`已暂存`内容与`上一次已提交`内容。  

### 提交更新  
现在暂存已经妥当的，可以提交了。
添加提交信息，两种方式：
- [-m]选项，将提交信息与命令放在同一行。  
- 使用默认编辑器添加。   


git commit -a： 跳过使用暂存区域,git会自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过git add。

### 移除文件    
要从git中移除某个文件，就必须要从已跟踪文件清单中移除（确切地说，从暂存区域移除），然后提交。  
可以用git rm命令完成此项工作，并连带从工作目录中删除指定的文件，这样以后就不会出现在未跟踪文件清单中了额。   

情况：
- 如果只是简单从工作目录中手工删除文件，运行git status时仍会看到。此时需要使用git rm从暂存区域删除。这样，下一次提交时，该文件就不会被纳入版本管理了。   
- 想保留文件在本地磁盘，但不保留在git版本里。使用`git rm --cached README`。  

### 移动文件   
```
git mv README.MD README
#相当于 三个命令
mv README.MD README
git rm README.MD
git add README
```

### 查看提交历史   
git log会按提交时间列出所有的更新，最近的更新排在最上面。   
git log选项：
-p , 显示每次提交的内容差异。  
-2 ， 仅显示最近两次提交。  


### 撤销操作  
情况：  
- git commit --amend, 提交完发现还有遗漏文件，或者提交信息错了，可用这个命令重新提交。  
- git reset，撤销暂存，不加选项时，只在暂存空间操作。撤销暂存不是撤销修改，要区分开。  
- git checkout -- <file>，撤销修改。需要知道，这个命令很危险，导致你对这个文件的任何修改消失。除非你确实清除不像要那个文件了，否则不要使用这个命令。git中已提交的东西几乎总可以恢复，但是未提交的东西丢失后很可能再也找不到。git add也会简单覆盖掉文件，所以，比较重要的确认要提交的修改，要及时提交到git仓库，而不仅仅放在暂存区域。       

### 远程仓库的使用  
远程仓库，指托管在远程的，你的项目版本库。  
管理远程仓库，需要了解如何添加远程仓库、管理不同的远程分支并定义它们是否被跟踪等等。   

####  查看远程仓库  
git remote -v。   

#### 添加远程仓库  
运行`git remote add <shortname> <url>`添加一个新的远程Git仓库，同时指定一个你可以轻松引用的简写。  
如果想拉取paul仓库中有，但你没有的信息，可以运行git fetch pb。  
这里有个疑问，可以跨仓库拉取信息？  

#### 从远程仓库中抓取与拉取  
如果你使用clone命令克隆了一个仓库，命令会自动将其添加为远程仓库并默认以origin为简写。所以git fetch origin会抓取克隆（会上一次抓取）后新推送的所有工作。必须注意git fetch命令会将数据拉取到你的本地仓库-它不会自动合并或修改你当前工作。当准备好你必须手动将其合并入你的工作。   

如果你有一个分支设置为跟踪一个远程分支，可以使用`git pull`命令来自动的抓取然后合并远程分支到当前分支。   

默认情况下，git clone命令会自动设置本地master分支跟踪被克隆的远程仓库master分支（或不管什么名字的默认分支）。   

运行git pull通常会从最初克隆的服务器上抓取数据并自动尝试合并到当前所在的分支。   


#### 推送到远程仓库  
`git push [romote-name] [branch-name]`

#### 查看远程仓库   
`git remote show [remote-name]`   

#### 远程仓库的移除与重命名   
`git remote rename [old name] [new name]`  
`git remote  rm [name]`


## 打标签  
Git可以给历史中某一个提交打上标签，以示重要。   
比较有代表性的是人们会使用这个功能来标记发布节点（如V1.0等）。   

#### 列出标签   
`git tag`  
`git tag -l 'v1.8.5*'`

#### 创建标签   
两种标签：轻量标签，附注标签。   
轻量标签很像一个不会改变的分支，它只是一个特定提交的引用。就是提交`校验和`存储到一个文件中。     
附注标签包含更多信息：如打标签者的名字、电子邮件、日期时间安、标签信息等。   
通常建议使用附注标签。   
`git tag -a v1.4 -m 'my version 1.4'` （其中v1.4就是我们打上的标签）。   

`git show v1.4`（查看）。  

#### 后期打标签   
通过提交历史上的SHA-1来识别某次提交，并打上标签。   
`git tag -a v1.2 9fceb02`   

#### 共享标签  
与远程共享标签。默认情况下，git push命令并不会传送标签到远程仓库服务器上。在创建完标签后你必须显示地推送标签到共享服务器上。   

`git push origin [tagname]`

`git push origin --tags`（推送所有的标签）   

#### 检出标签  
在git中不能真的检出一个标签，因为git标签不能像分支一样来回移动。   


## Git 别名  
通过配置简化命令长度，与bash中的alias命令功能一样，同样需要在git config中进行配置。   
```
git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.ci commit
git config --global alias.st status
git config --global alias.unstage 'reset HEAD --'
git config --global alias.last 'log -1 HEAD'
```
